# LINE BotåŒ–ã®æ¦‚è¦ã¨è€ƒæ…®äº‹é …

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [Webç‰ˆã¨LINE botç‰ˆã®é•ã„](#webç‰ˆã¨line-botç‰ˆã®é•ã„)
3. [ä¸»è¦ãªæŠ€è¡“çš„è€ƒæ…®äº‹é …](#ä¸»è¦ãªæŠ€è¡“çš„è€ƒæ…®äº‹é …)
4. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å¤‰æ›´ç‚¹](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å¤‰æ›´ç‚¹)
5. [å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º](#å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º)

---

## æ¦‚è¦

Journee Webç‰ˆã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ãƒãƒ£ãƒƒãƒˆå½¢å¼ã§AIã¨å¯¾è©±ã—ãªãŒã‚‰æ—…è¡Œã®ã—ãŠã‚Šã‚’ä½œæˆã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ã“ã‚Œã‚’LINE botã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªåˆ©ç‚¹ãŒå¾—ã‚‰ã‚Œã¾ã™ï¼š

### LINE botåŒ–ã®ä¸»ãªåˆ©ç‚¹

| åˆ©ç‚¹ | èª¬æ˜ |
|------|------|
| **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å°‚ç”¨ã‚¢ãƒ—ãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒãªãã€LINEã‹ã‚‰ç›´æ¥åˆ©ç”¨å¯èƒ½ |
| **ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–** | ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã®åˆ©ç”¨ã‚’å‰æã¨ã—ãŸè¨­è¨ˆ |
| **ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥** | ã—ãŠã‚Šå®Œæˆã€æ—…è¡Œã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãªã©ã‚’èƒ½å‹•çš„ã«é€šçŸ¥å¯èƒ½ |
| **å…±æœ‰æ©Ÿèƒ½** | LINEã®å‹é”ã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã«ç°¡å˜ã«ã—ãŠã‚Šã‚’å…±æœ‰ |
| **éŸ³å£°å…¥åŠ›** | LINEã®éŸ³å£°å…¥åŠ›æ©Ÿèƒ½ã‚’æ´»ç”¨ã—ãŸä¾¿åˆ©ãªå…¥åŠ› |

### LINE botåŒ–ã®åˆ¶ç´„

| åˆ¶ç´„ | å½±éŸ¿ | å¯¾å¿œç­– |
|------|------|--------|
| **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ä¸å¯** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ›´æ–°ãŒã§ããªã„ | æ®µéšçš„ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹è¨­è¨ˆã«å¤‰æ›´ |
| **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼åˆ¶é™** | Flex Messageãªã©ã€LINEç‹¬è‡ªã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ä½¿ç”¨ | ãƒªãƒƒãƒãªUIã‚’Flex Messageã§å®Ÿç¾ |
| **å¿œç­”æ™‚é–“åˆ¶é™** | Webhookã¯30ç§’ä»¥å†…ã«å¿œç­”ãŒå¿…è¦ | éåŒæœŸå‡¦ç†ï¼‹ã€Œè€ƒãˆä¸­...ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§å¯¾å¿œ |
| **UIã®åˆ¶ç´„** | Webç‰ˆã®ã‚ˆã†ãªè‡ªç”±ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ä¸å¯ | LINEã®åˆ¶ç´„å†…ã§æœ€é©ãªUXã‚’è¨­è¨ˆ |

---

## Webç‰ˆã¨LINE botç‰ˆã®é•ã„

### 1. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ¢ãƒ‡ãƒ«

#### Webç‰ˆ
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ ãƒãƒ£ãƒƒãƒˆå…¥åŠ› â†’ WebSocket/SSE â†’ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­” â†’ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
```

- **ç‰¹å¾´**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§AIã®æ€è€ƒéç¨‹ãŒè¦‹ãˆã‚‹
- **å®Ÿè£…**: `/api/chat`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”
- **æŠ€è¡“**: Server-Sent Events (SSE)

#### LINE botç‰ˆ
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ LINEãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ â†’ Webhook â†’ ãƒãƒƒãƒå‡¦ç† â†’ æ®µéšçš„é€ä¿¡ â†’ è¤‡æ•°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
```

- **ç‰¹å¾´**: å®Œæˆã—ãŸæƒ…å ±ã‚’å°å‡ºã—ã«é€ä¿¡
- **å®Ÿè£…**: `/api/line/webhook`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§å—ä¿¡ã€éåŒæœŸå‡¦ç†
- **æŠ€è¡“**: LINE Messaging APIï¼ˆReply API / Push APIï¼‰

### 2. UIãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

#### Webç‰ˆ
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: ãƒªã‚µã‚¤ã‚ºå¯èƒ½ãª2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆãƒãƒ£ãƒƒãƒˆï¼‹ã—ãŠã‚Šãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§è‡ªç”±ãªé…ç½®
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**: ã‚¯ãƒªãƒƒã‚¯ã€ãƒ‰ãƒ©ãƒƒã‚°ã€ãƒ›ãƒãƒ¼ãªã©è±Šå¯Œ

#### LINE botç‰ˆ
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: ç¸¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆ
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: Flex Messageã«ã‚ˆã‚‹ã‚«ãƒ¼ãƒ‰å‹UI
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**: ã‚¿ãƒƒãƒ—ã€ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ—ãƒ©ã‚¤ã€ãƒã‚¹ãƒˆãƒãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«é™å®š

### 3. ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

#### Webç‰ˆ
```typescript
// Zustandã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ãƒˆã‚¢ + NextAuth ã‚»ãƒƒã‚·ãƒ§ãƒ³
const { currentItinerary, messages } = useStore();
const { data: session } = useSession();
```

- **çŠ¶æ…‹ç®¡ç†**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰Zustand + LocalStorage
- **èªè¨¼**: NextAuth.js (Google OAuth)
- **æ°¸ç¶šåŒ–**: Supabase PostgreSQL

#### LINE botç‰ˆ
```typescript
// LINE User ID ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
const userId = event.source.userId;
const session = await getOrCreateUserSession(userId);
```

- **çŠ¶æ…‹ç®¡ç†**: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ã¿ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰
- **èªè¨¼**: LINE User IDã«ã‚ˆã‚‹è‡ªå‹•èªè¨¼
- **æ°¸ç¶šåŒ–**: Supabase PostgreSQLï¼ˆåŒã˜ã‚¹ã‚­ãƒ¼ãƒã‚’æ´»ç”¨ï¼‰

---

## ä¸»è¦ãªæŠ€è¡“çš„è€ƒæ…®äº‹é …

### 1. ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã‹ã‚‰æ®µéšçš„é€ä¿¡ã¸ã®å¤‰æ›´

#### å•é¡Œ
LINEã§ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸€ã¤ãšã¤é€ã‚‹ã“ã¨ã—ã‹ã§ããšã€æ—¢å­˜ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãã®ã¾ã¾ä½¿ãˆãªã„ã€‚

#### è§£æ±ºç­–ï¼šæ®µéšçš„é€ä¿¡ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```typescript
// ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”ã‚’ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°
const streamParser = new LINEStreamParser({
  onSpotExtracted: async (spot) => {
    // è¦³å…‰åœ°ãŒæŠ½å‡ºã•ã‚ŒãŸã‚‰å³åº§ã«LINEã«é€ä¿¡
    await lineClient.pushMessage(userId, createSpotMessage(spot));
  },
  onMealExtracted: async (meal) => {
    // é£Ÿäº‹æƒ…å ±ãŒæŠ½å‡ºã•ã‚ŒãŸã‚‰å³åº§ã«LINEã«é€ä¿¡
    await lineClient.pushMessage(userId, createMealMessage(meal));
  },
  onComplete: async (itinerary) => {
    // å®Œæˆã—ãŸã—ãŠã‚Šå…¨ä½“ã‚’é€ä¿¡
    await lineClient.pushMessage(userId, createItinerarySummary(itinerary));
  }
});

// AIã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”ã‚’è§£æã—ãªãŒã‚‰æ®µéšçš„ã«é€ä¿¡
await processAIStream(userMessage, streamParser);
```

**ãƒ¡ãƒªãƒƒãƒˆ:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¾…ã¡æ™‚é–“ã‚’æ„Ÿã˜ã«ãã„
- æ®µéšçš„ã«æƒ…å ±ãŒå±ŠããŸã‚ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ„ŸãŒã‚ã‚‹
- ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã«ã‚ˆã‚Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å“è³ªã‚’ä¿è¨¼

### 2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ¨™æº–åŒ–

#### å•é¡Œ
è¦³å…‰åœ°ã€é£Ÿäº‹ã€æ­“æ¥½è¡—ãªã©ã€ç•°ãªã‚‹ã‚«ãƒ†ã‚´ãƒªã®æƒ…å ±ã‚’çµ±ä¸€çš„ã«æ‰±ã†å¿…è¦ãŒã‚ã‚‹ã€‚

#### è§£æ±ºç­–ï¼šã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```typescript
// types/line-message.ts
export interface SpotMessage {
  type: 'tourist_spot' | 'restaurant' | 'entertainment' | 'accommodation';
  name: string;
  description: string;
  time?: string;
  budget?: number;
  location?: {
    lat: number;
    lng: number;
    address: string;
  };
  imageUrl?: string;
  tags?: string[];
}

// lib/line/message-formatter.ts
export function createSpotFlexMessage(spot: SpotMessage): FlexMessage {
  return {
    type: 'flex',
    altText: `${spot.name} ã®æƒ…å ±`,
    contents: {
      type: 'bubble',
      hero: spot.imageUrl ? {
        type: 'image',
        url: spot.imageUrl,
        size: 'full',
        aspectRatio: '20:13',
        aspectMode: 'cover'
      } : undefined,
      body: {
        type: 'box',
        layout: 'vertical',
        contents: [
          {
            type: 'text',
            text: getCategoryIcon(spot.type) + ' ' + spot.name,
            weight: 'bold',
            size: 'xl'
          },
          {
            type: 'text',
            text: spot.description,
            wrap: true,
            color: '#666666',
            size: 'sm'
          },
          // ... æ™‚é–“ã€äºˆç®—ã€ä½ç½®æƒ…å ±ãªã©
        ]
      },
      footer: {
        type: 'box',
        layout: 'vertical',
        contents: [
          {
            type: 'button',
            action: {
              type: 'uri',
              label: 'åœ°å›³ã§è¦‹ã‚‹',
              uri: `https://maps.google.com/?q=${spot.location.lat},${spot.location.lng}`
            }
          }
        ]
      }
    }
  };
}
```

### 3. Webhookå¿œç­”æ™‚é–“åˆ¶é™ã¸ã®å¯¾å¿œ

#### å•é¡Œ
LINE Webhookã¯30ç§’ä»¥å†…ã«å¿œç­”ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€AIå‡¦ç†ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚‹ã€‚

#### è§£æ±ºç­–ï¼šéåŒæœŸå‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// app/api/line/webhook/route.ts
export async function POST(req: Request) {
  const signature = req.headers.get('x-line-signature');
  const body = await req.text();
  
  // ç½²åæ¤œè¨¼
  if (!validateSignature(body, signature)) {
    return new Response('Unauthorized', { status: 401 });
  }
  
  const events = JSON.parse(body).events;
  
  // å³åº§ã«200 OKã‚’è¿”ã™
  res.status(200).json({ success: true });
  
  // ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§éåŒæœŸå‡¦ç†
  for (const event of events) {
    if (event.type === 'message' && event.message.type === 'text') {
      // éåŒæœŸå‡¦ç†ï¼ˆawait ã—ãªã„ï¼‰
      processMessageAsync(event).catch(console.error);
    }
  }
}

async function processMessageAsync(event: WebhookEvent) {
  const userId = event.source.userId;
  const userMessage = event.message.text;
  
  // ã€Œè€ƒãˆä¸­...ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
  await lineClient.pushMessage(userId, {
    type: 'text',
    text: 'ğŸ¤” æ—…è¡Œãƒ—ãƒ©ãƒ³ã‚’è€ƒãˆã¦ã„ã¾ã™...'
  });
  
  // AIå‡¦ç†ã¨æ®µéšçš„é€ä¿¡
  await processItineraryCreation(userId, userMessage);
}
```

### 4. ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

#### å•é¡Œ
Webç‰ˆã§ã¯NextAuth.jsã«ã‚ˆã‚‹Googleèªè¨¼ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŒã€LINE botã§ã¯LINE User IDã‚’ä½¿ç”¨ã™ã‚‹ã€‚

#### è§£æ±ºç­–ï¼šçµ±ä¸€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

```typescript
// lib/db/user-repository.ts
export async function getOrCreateLineUser(lineUserId: string, profile: LineProfile) {
  // LINE User IDã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢
  let user = await supabase
    .from('users')
    .select('*')
    .eq('line_user_id', lineUserId)
    .single();
  
  if (!user.data) {
    // æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
    user = await supabase
      .from('users')
      .insert({
        line_user_id: lineUserId,
        name: profile.displayName,
        image: profile.pictureUrl,
        created_at: new Date().toISOString()
      })
      .select()
      .single();
  }
  
  return user.data;
}

// ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒæ‹¡å¼µ
/*
ALTER TABLE users ADD COLUMN line_user_id TEXT UNIQUE;
CREATE INDEX idx_users_line_user_id ON users(line_user_id);
*/
```

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å¤‰æ›´ç‚¹

### æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†åˆ©ç”¨

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | Webç‰ˆ | LINE botç‰ˆ | å†åˆ©ç”¨å¯èƒ½æ€§ |
|--------------|-------|-----------|------------|
| **AIãƒ­ã‚¸ãƒƒã‚¯** | `/lib/ai/gemini.ts`, `/lib/ai/claude.ts` | åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ | âœ… 100% |
| **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ** | `/lib/ai/prompts.ts` | åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ | âœ… 100% |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | `/lib/db/itinerary-repository.ts` | åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ | âœ… 95%ï¼ˆä¸€éƒ¨è¿½åŠ ï¼‰ |
| **å‹å®šç¾©** | `/types/itinerary.ts` | åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ | âœ… 90%ï¼ˆLINEå°‚ç”¨å‹è¿½åŠ ï¼‰ |
| **UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** | `/components/**/*.tsx` | ä½¿ç”¨ä¸å¯ | âŒ 0% |
| **çŠ¶æ…‹ç®¡ç†** | `/lib/store/useStore.ts` | ä½¿ç”¨ä¸å¯ | âŒ 0% |

### æ–°è¦è¿½åŠ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```
/app/api/line/
â”œâ”€â”€ webhook/
â”‚   â””â”€â”€ route.ts                    # Webhookå—ä¿¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ rich-menu/
â”‚   â””â”€â”€ route.ts                    # ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼è¨­å®šAPI
â””â”€â”€ broadcast/
    â””â”€â”€ route.ts                    # ä¸€æ–‰é…ä¿¡APIï¼ˆç®¡ç†è€…ç”¨ï¼‰

/lib/line/
â”œâ”€â”€ client.ts                       # LINE Bot SDK ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–
â”œâ”€â”€ message-formatter.ts            # Flex Messageç”Ÿæˆ
â”œâ”€â”€ stream-parser.ts                # ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°â†’æ®µéšçš„é€ä¿¡å¤‰æ›
â”œâ”€â”€ session-manager.ts              # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â””â”€â”€ handlers/
    â”œâ”€â”€ text-message-handler.ts     # ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†
    â”œâ”€â”€ postback-handler.ts         # ãƒã‚¹ãƒˆãƒãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†
    â””â”€â”€ follow-handler.ts           # å‹ã ã¡è¿½åŠ ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†

/types/
â””â”€â”€ line.ts                         # LINE botå°‚ç”¨å‹å®šç¾©
```

---

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: åŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ1-2æ—¥ï¼‰

- [ ] LINE Developersã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
- [ ] Messaging APIãƒãƒ£ãƒãƒ«ä½œæˆ
- [ ] åŸºæœ¬çš„ãªWebhookå¿œç­”å®Ÿè£…
- [ ] ã‚ªã‚¦ãƒ è¿”ã—botã§å‹•ä½œç¢ºèª

### Phase 2: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè¨­è¨ˆï¼ˆ2-3æ—¥ï¼‰

- [ ] Flex Messageãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ
- [ ] ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿å®Ÿè£…
- [ ] ç”»åƒãƒ»åœ°å›³è¡¨ç¤ºå¯¾å¿œ
- [ ] ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ—ãƒ©ã‚¤è¨­è¨ˆ

### Phase 3: AIçµ±åˆï¼ˆ3-5æ—¥ï¼‰

- [ ] æ—¢å­˜AIãƒ­ã‚¸ãƒƒã‚¯ã®æ´»ç”¨
- [ ] ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°è§£æãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£…
- [ ] æ®µéšçš„é€ä¿¡ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### Phase 4: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆï¼ˆ2-3æ—¥ï¼‰

- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µ
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†å®Ÿè£…
- [ ] ã—ãŠã‚Šä¿å­˜ãƒ»èª­ã¿è¾¼ã¿æ©Ÿèƒ½
- [ ] å…±æœ‰æ©Ÿèƒ½å®Ÿè£…

### Phase 5: ãƒªãƒƒãƒæ©Ÿèƒ½ï¼ˆ3-5æ—¥ï¼‰

- [ ] ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼å®Ÿè£…
- [ ] ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥æ©Ÿèƒ½
- [ ] ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯¾å¿œ
- [ ] ä½ç½®æƒ…å ±å…±æœ‰å¯¾å¿œ

### Phase 6: ãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆ2-3æ—¥ï¼‰

- [ ] E2Eãƒ†ã‚¹ãƒˆå®Ÿè£…
- [ ] æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
- [ ] Webhook URLè¨­å®š
- [ ] ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°è¨­å®š

**åˆè¨ˆæƒ³å®šæœŸé–“**: 13-21æ—¥

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ã“ã®æ¦‚è¦ã‚’ç†è§£ã—ãŸã‚‰ã€æ¬¡ã¯ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«é€²ã‚“ã§ãã ã•ã„ï¼š

1. **ã™ãã«å§‹ã‚ãŸã„æ–¹**: [02_REGISTRATION.md](./02_REGISTRATION.md) - LINE Developersç™»éŒ²
2. **è¨­è¨ˆã‚’æ·±ãç†è§£ã—ãŸã„æ–¹**: [03_ARCHITECTURE.md](./03_ARCHITECTURE.md) - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°

---

**æœ€çµ‚æ›´æ–°**: 2025-10-10  
**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [README.md](./README.md), [03_ARCHITECTURE.md](./03_ARCHITECTURE.md)
