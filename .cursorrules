# Cursor AI Rules - npm build ãƒã‚§ãƒƒã‚¯è¦ç´„

## ğŸ¯ æœ€é‡è¦ãƒ«ãƒ¼ãƒ«: ãƒ“ãƒ«ãƒ‰ã‚’å£Šã•ãªã„

**ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›´å‰ã«ä»¥ä¸‹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ï¼š**
1. å‹ãƒã‚§ãƒƒã‚¯ãŒé€šã‚‹ã“ã¨ (`npm run type-check`)
2. LintãŒé€šã‚‹ã“ã¨ (`npm run lint`)
3. ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ã“ã¨ (`npm run build`)

## ğŸ“‹ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### TypeScript

#### å‹å®šç¾©
- **å¿…é ˆ**: ã™ã¹ã¦ã®é–¢æ•°ã®å¼•æ•°ã¨æˆ»ã‚Šå€¤ã«å‹ã‚’ä»˜ã‘ã‚‹
- **ç¦æ­¢**: `any` å‹ã®ä½¿ç”¨ï¼ˆã‚„ã‚€ã‚’å¾—ãªã„å ´åˆã¯ç†ç”±ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã§æ˜è¨˜ï¼‰
- **æ¨å¥¨**: `unknown` ã‚’ä½¿ã„ã€å‹ã‚¬ãƒ¼ãƒ‰ã§çµã‚Šè¾¼ã‚€

```typescript
// âŒ NG
function processData(data: any) {
  return data.value;
}

// âœ… OK
function processData(data: { value: string }): string {
  return data.value;
}

// âœ… OK (unknownã‚’ä½¿ã†å ´åˆ)
function processData(data: unknown): string {
  if (typeof data === 'object' && data !== null && 'value' in data) {
    return String(data.value);
  }
  throw new Error('Invalid data');
}
```

#### Null/Undefined ãƒã‚§ãƒƒã‚¯
- **å¿…é ˆ**: ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹éš›ã¯ `?.` ã‚’ä½¿ç”¨
- **å¿…é ˆ**: null/undefined ã®å¯èƒ½æ€§ãŒã‚ã‚‹å€¤ã¯ `??` ã§ä»£æ›¿å€¤ã‚’æä¾›

```typescript
// âŒ NG
const name = user.profile.name;

// âœ… OK
const name = user?.profile?.name ?? 'Unknown';
```

#### ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- **å¿…é ˆ**: `@/` ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ï¼ˆç›¸å¯¾ãƒ‘ã‚¹ã¯ç¦æ­¢ï¼‰
- **ç¦æ­¢**: ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­ã‚’å«ã‚ãªã„

```typescript
// âŒ NG
import { useStore } from '../../../lib/store/useStore';
import MyComponent from './MyComponent.tsx';

// âœ… OK
import { useStore } from '@/lib/store/useStore';
import MyComponent from './MyComponent';
```

### Next.js App Router

#### Server/Client Components
- **å¿…é ˆ**: hooks ã‚„ state ã‚’ä½¿ã†å ´åˆã¯ `'use client'` ã‚’å…ˆé ­ã«è¿½åŠ 
- **æ¨å¥¨**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Server Componentã¨ã—ã€å¿…è¦ãªå ´åˆã®ã¿Client Componentã«ã™ã‚‹

```typescript
// Client Component ã®å ´åˆ
'use client';
import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);
  return <button onClick={() => setCount(count + 1)}>{count}</button>;
}
```

#### API Routes
- **å¿…é ˆ**: åå‰ä»˜ãã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆGET, POST, etc.ï¼‰ã‚’ä½¿ç”¨
- **å¿…é ˆ**: Request/Response ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨

```typescript
// âŒ NG
export default function handler(req, res) {
  res.json({ data: 'hello' });
}

// âœ… OK
export async function GET(request: Request) {
  return Response.json({ data: 'hello' });
}
```

#### Dynamic Routes
- **å¿…é ˆ**: params ã¯ Promise ã¨ã—ã¦æ‰±ã†ï¼ˆNext.js 15+ï¼‰

```typescript
// Next.js 14
export default function Page({ params }: { params: { id: string } }) {
  return <div>{params.id}</div>;
}

// Next.js 15+ (æ¨å¥¨)
export default async function Page({ params }: { params: Promise<{ id: string }> }) {
  const { id } = await params;
  return <div>{id}</div>;
}
```

### React

#### Hooks
- **å¿…é ˆ**: useEffect ã®ä¾å­˜é…åˆ—ã‚’æ­£ç¢ºã«è¨­å®š
- **å¿…é ˆ**: useEffect ã§ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãŒå¿…è¦ãªå ´åˆã¯ return é–¢æ•°ã‚’å®Ÿè£…
- **æ¨å¥¨**: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¯ `use` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã§å§‹ã‚ã‚‹

```typescript
// âŒ NG
useEffect(() => {
  const interval = setInterval(() => {
    console.log('tick');
  }, 1000);
  // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãŒãªã„
}, []);

// âœ… OK
useEffect(() => {
  const interval = setInterval(() => {
    console.log('tick');
  }, 1000);
  
  return () => clearInterval(interval);
}, []);
```

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **å¿…é ˆ**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® Props ã«å‹ã‚’å®šç¾©
- **æ¨å¥¨**: Props ãŒå¤šã„å ´åˆã¯ interface ã‚’ä½¿ç”¨

```typescript
// âŒ NG
export default function Button({ label, onClick }) {
  return <button onClick={onClick}>{label}</button>;
}

// âœ… OK
interface ButtonProps {
  label: string;
  onClick: () => void;
  variant?: 'primary' | 'secondary';
}

export default function Button({ label, onClick, variant = 'primary' }: ButtonProps) {
  return <button onClick={onClick} className={variant}>{label}</button>;
}
```

### ESLint

#### ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰
- **ç¦æ­¢**: `console.log` ã®æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã¸ã®ã‚³ãƒŸãƒƒãƒˆ
- **è¨±å¯**: `console.error`, `console.warn` ã¯ OK

```typescript
// âŒ NG
console.log('Debug:', data);

// âœ… OKï¼ˆé–‹ç™ºæ™‚ã®ã¿ï¼‰
if (process.env.NODE_ENV === 'development') {
  console.log('Debug:', data);
}

// âœ… OK
console.error('Error occurred:', error);
```

#### æœªä½¿ç”¨ã‚³ãƒ¼ãƒ‰
- **å¿…é ˆ**: æœªä½¿ç”¨ã®å¤‰æ•°ãƒ»ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’å‰Šé™¤
- **å¿…é ˆ**: æœªä½¿ç”¨ã®é–¢æ•°ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‰Šé™¤

### Zustand

#### ã‚¹ãƒˆã‚¢æ›´æ–°
- **å¿…é ˆ**: ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªæ›´æ–°ã‚’è¡Œã†ï¼ˆç›´æ¥å¤‰æ›´ç¦æ­¢ï¼‰
- **æ¨å¥¨**: ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ¼”ç®—å­ã¾ãŸã¯ map/filter ã‚’ä½¿ç”¨

```typescript
// âŒ NG
set((state) => {
  state.items.push(newItem);
  return state;
});

// âœ… OK
set((state) => ({
  items: [...state.items, newItem]
}));

// âœ… OK (é…åˆ—ã®æ›´æ–°)
set((state) => ({
  items: state.items.map(item => 
    item.id === id ? { ...item, ...updates } : item
  )
}));
```

## ğŸ”§ ã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ãŸã‚‰ã€å¿…ãšä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

```bash
# 1. å‹ãƒã‚§ãƒƒã‚¯
npm run type-check

# 2. Lintãƒã‚§ãƒƒã‚¯
npm run lint

# 3. ãƒ“ãƒ«ãƒ‰ç¢ºèª
npm run build
```

ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã¯ã€`docs/LINT.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸš« çµ¶å¯¾ã«ã‚„ã£ã¦ã¯ã„ã‘ãªã„ã“ã¨

1. **å‹ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã—ã¦ã‚³ãƒŸãƒƒãƒˆ**
   - `// @ts-ignore` ã‚’å®‰æ˜“ã«ä½¿ã‚ãªã„
   - å‹ã‚¨ãƒ©ãƒ¼ã¯å¿…ãšä¿®æ­£ã™ã‚‹

2. **ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã—ã¦ãƒ—ãƒƒã‚·ãƒ¥**
   - ãƒ­ãƒ¼ã‚«ãƒ«ã§ `npm run build` ãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª

3. **ESLint ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–**
   - `// eslint-disable-next-line` ã‚’å®‰æ˜“ã«ä½¿ã‚ãªã„

4. **console.log ã‚’æ®‹ã—ãŸã¾ã¾ã‚³ãƒŸãƒƒãƒˆ**
   - ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰ã¯å‰Šé™¤ã™ã‚‹ã‹ã€é–‹ç™ºç’°å¢ƒã®ã¿ã§å®Ÿè¡Œ

5. **æœªä½¿ç”¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»å¤‰æ•°ã‚’æ®‹ã™**
   - IDE ã®è­¦å‘Šã«å¾“ã£ã¦å‰Šé™¤

## ğŸ“ AI ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ”¯æ´ã§ã®æ³¨æ„ç‚¹

Cursor AI ã«ä¾é ¼ã™ã‚‹éš›ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ˜ç¤ºã—ã¦ãã ã•ã„ï¼š

```
ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’å®ˆã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š
1. ã™ã¹ã¦ã®å‹ã‚’æ˜ç¤ºçš„ã«å®šç¾©
2. console.log ã‚’ä½¿ç”¨ã—ãªã„
3. Next.js App Router ã®è¦ç´„ã«å¾“ã†
4. Zustand ã®æ›´æ–°ã¯ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ã«è¡Œã†
5. ã‚³ãƒŸãƒƒãƒˆå‰ã« npm run type-check && npm run lint && npm run build ãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèª
```

## ğŸ“ æ¨å¥¨ãƒªã‚½ãƒ¼ã‚¹

- [docs/LINT.md](docs/LINT.md) - è©³ç´°ãªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã¨ã‚¨ãƒ©ãƒ¼ä¾‹
- [docs/GUIDELINE.md](docs/GUIDELINE.md) - é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
- [Next.js ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs)
- [TypeScript ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.typescriptlang.org/docs/)

## ğŸ”„ ã“ã®ãƒ«ãƒ¼ãƒ«ã®æ›´æ–°

ã“ã®ãƒ«ãƒ¼ãƒ«ã¯å®šæœŸçš„ã«è¦‹ç›´ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æˆé•·ã«åˆã‚ã›ã¦æ›´æ–°ã—ã¦ãã ã•ã„ã€‚
æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ãŒè¦‹ã¤ã‹ã£ãŸã‚‰ã€ãƒãƒ¼ãƒ ã§è­°è«–ã—ã¦è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
