---
alwaysApply: true
description: "Security and performance guidelines"
---
# セキュリティとパフォーマンス

## セキュリティ

### 認証
- NextAuth.jsによる安全な認証フロー
- JWT戦略の使用
- HTTPOnly Cookieの使用

### APIキー管理
- クライアント側での暗号化保存
- 環境変数での適切な管理
- APIキーのローテーション対応

### サーバーサイド処理
- AI APIはサーバーサイドからのみ呼び出し
- クライアントサイドでの機密情報の非露出
- 適切なCORS設定

### レート制限
- API呼び出しの制限実装
- バーストリクエストの防止
- IP単位での制限

## パフォーマンス

### ストリーミングレスポンス
- AIレスポンスのリアルタイム表示
- チャンクサイズの最適化
- バッファリング戦略

### 画像最適化
- Next.js Imageコンポーネントの活用
- 遅延読み込みの実装
- WebP形式の使用

### コンポーネント最適化
- React.memoの適切な使用
- useMemo、useCallbackの活用
- 不要な再レンダリングの防止

### コード分割
- 動的インポートの活用
- ルートベースの分割
- 初期ロードの最適化

## UX最適化

### ローディング状態
- Skeletonローダーの使用
- プログレスバーの実装
- スムーズな遷移アニメーション

### エラーハンドリング
- ユーザーフレンドリーなエラーメッセージ
- リカバリーオプションの提供
- エラーログの収集

### オフライン対応
- LocalStorageによるオフライン編集
- 自動同期機能
- オフライン状態の通知
