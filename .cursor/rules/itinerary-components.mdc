---
globs: "components/itinerary/**/*,types/itinerary.ts,lib/mock-data/**/*"
---

# ã—ãŠã‚Šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆPhase 5.1ï¼‰

## æ¦‚è¦
Phase 5.1ã§å®Ÿè£…ã—ãŸ7ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸã—ãŠã‚Šæ©Ÿèƒ½ã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨è¨­è¨ˆåŸå‰‡ã€‚

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¸€è¦§

### 1. ItineraryHeader - ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚µãƒãƒªãƒ¼
**ãƒ•ã‚¡ã‚¤ãƒ«**: [ItineraryHeader.tsx](mdc:components/itinerary/ItineraryHeader.tsx)

**å½¹å‰²**:
- ã—ãŠã‚Šã®ã‚¿ã‚¤ãƒˆãƒ«ã€ç›®çš„åœ°ã€æ—¥ç¨‹ã€äºˆç®—ã‚’è¡¨ç¤º
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ï¼ˆä½œæˆä¸­/å®Œæˆ/ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼‰
- ç·¨é›†ãƒœã‚¿ãƒ³ã®çµ±åˆ

**ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```typescript
import { ItineraryHeader } from '@/components/itinerary/ItineraryHeader';

<ItineraryHeader
  itinerary={currentItinerary}
  onEdit={() => setIsEditing(true)}
  isEditing={isEditing}
/>
```

**ãƒ‡ã‚¶ã‚¤ãƒ³åŸå‰‡**:
- ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ï¼ˆ`bg-gradient-to-br from-blue-600 to-purple-600`ï¼‰
- ç™½ãƒ†ã‚­ã‚¹ãƒˆã§è¦–èªæ€§ç¢ºä¿
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ã¯è‰²åˆ†ã‘ï¼ˆä½œæˆä¸­=é’ã€å®Œæˆ=ç·‘ã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–=ã‚°ãƒ¬ãƒ¼ï¼‰

---

### 2. DaySchedule - æ—¥ç¨‹è¡¨ç¤º
**ãƒ•ã‚¡ã‚¤ãƒ«**: [DaySchedule.tsx](mdc:components/itinerary/DaySchedule.tsx)

**å½¹å‰²**:
- æ—¥ç¨‹ã®å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
- çµ±è¨ˆæƒ…å ±ã®è¡¨ç¤ºï¼ˆã‚¹ãƒãƒƒãƒˆæ•°ã€æ»åœ¨æ™‚é–“ã€ã‚«ãƒ†ã‚´ãƒªæ•°ï¼‰
- ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†
- ã‚¹ãƒãƒƒãƒˆä¸€è¦§ã®è¡¨ç¤º

**ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```typescript
import { DaySchedule } from '@/components/itinerary/DaySchedule';

<DaySchedule
  day={day}
  isEditing={isEditing}
  onDayUpdate={(updatedDay) => {
    // Zustandã§çŠ¶æ…‹æ›´æ–°
    updateItinerary({ schedule: [...updatedSchedule] });
  }}
/>
```

**å®Ÿè£…åŸå‰‡**:
- âœ… æŠ˜ã‚ŠãŸãŸã¿çŠ¶æ…‹ã¯å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ç®¡ç†ï¼ˆ`useState`ï¼‰
- âœ… ç·¨é›†å†…å®¹ã¯è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ä¼æ’­ï¼ˆ`onDayUpdate` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
- âœ… çµ±è¨ˆæƒ…å ±ã¯è‡ªå‹•è¨ˆç®—ï¼ˆã‚¹ãƒãƒƒãƒˆé…åˆ—ã‹ã‚‰ç®—å‡ºï¼‰

---

### 3. SpotCard - è¦³å…‰ã‚¹ãƒãƒƒãƒˆã‚«ãƒ¼ãƒ‰
**ãƒ•ã‚¡ã‚¤ãƒ«**: [SpotCard.tsx](mdc:components/itinerary/SpotCard.tsx)

**å½¹å‰²**:
- ã‚¹ãƒãƒƒãƒˆæƒ…å ±ã®è©³ç´°è¡¨ç¤º
- ã‚«ãƒ†ã‚´ãƒªã‚¢ã‚¤ã‚³ãƒ³ï¼ˆğŸ›ï¸è¦³å…‰ã€ğŸ½ï¸é£Ÿäº‹ã€ğŸš—ç§»å‹•ã€ğŸ¨å®¿æ³Šï¼‰
- ç”»åƒè¡¨ç¤ºï¼ˆNext.js Imageä½¿ç”¨ï¼‰
- Google Mapsãƒªãƒ³ã‚¯
- ç·¨é›†ãƒœã‚¿ãƒ³ï¼ˆãƒ›ãƒãƒ¼æ™‚è¡¨ç¤ºï¼‰

**ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```typescript
import { SpotCard } from '@/components/itinerary/SpotCard';

<SpotCard
  spot={spot}
  isEditing={isEditing}
  onEdit={(updatedSpot) => {
    // ã‚¹ãƒãƒƒãƒˆæ›´æ–°å‡¦ç†
  }}
/>
```

**ã‚«ãƒ†ã‚´ãƒªã‚¢ã‚¤ã‚³ãƒ³ãƒãƒƒãƒ”ãƒ³ã‚°**:
```typescript
const categoryIcons = {
  sightseeing: 'ğŸ›ï¸',
  dining: 'ğŸ½ï¸',
  transportation: 'ğŸš—',
  accommodation: 'ğŸ¨',
  other: 'ğŸ“',
};
```

**ãƒ‡ã‚¶ã‚¤ãƒ³åŸå‰‡**:
- âœ… ãƒ›ãƒãƒ¼æ™‚ã«ç·¨é›†ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºï¼ˆ`group-hover:opacity-100`ï¼‰
- âœ… ç”»åƒã¯ Next.js Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æœ€é©åŒ–
- âœ… é•·ã„èª¬æ˜æ–‡ã¯ã€Œç¶šãã‚’èª­ã‚€ã€ã§å±•é–‹
- âœ… Google Maps ãƒªãƒ³ã‚¯ã¯å¤–éƒ¨ãƒªãƒ³ã‚¯ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆ`ExternalLink`ï¼‰ä»˜ã

---

### 4. EditSpotModal - ã‚¹ãƒãƒƒãƒˆç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«
**ãƒ•ã‚¡ã‚¤ãƒ«**: [EditSpotModal.tsx](mdc:components/itinerary/EditSpotModal.tsx)

**å½¹å‰²**:
- ã™ã¹ã¦ã®ã‚¹ãƒãƒƒãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç·¨é›†
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- ä¿å­˜/ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ“ä½œ

**ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```typescript
import { EditSpotModal } from '@/components/itinerary/EditSpotModal';

const [editingSpot, setEditingSpot] = useState<TouristSpot | null>(null);

<EditSpotModal
  spot={editingSpot}
  isOpen={!!editingSpot}
  onClose={() => setEditingSpot(null)}
  onSave={(updatedSpot) => {
    // Zustandæ›´æ–°å‡¦ç†
    setEditingSpot(null);
  }}
/>
```

**ç·¨é›†å¯èƒ½ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- ã‚¹ãƒãƒƒãƒˆåã€ã‚«ãƒ†ã‚´ãƒªã€èª¬æ˜
- äºˆå®šæ™‚åˆ»ã€æ»åœ¨æ™‚é–“
- ä½æ‰€ã€ç·¯åº¦çµŒåº¦
- äºˆç®—ã€ç”»åƒURLã€ãƒ¡ãƒ¢

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**:
- âœ… å¿…é ˆé …ç›®: ã‚¹ãƒãƒƒãƒˆåã€ã‚«ãƒ†ã‚´ãƒª
- âœ… æ•°å€¤é …ç›®: æ»åœ¨æ™‚é–“ï¼ˆåˆ†ï¼‰ã€äºˆç®—ã€ç·¯åº¦çµŒåº¦

---

### 5. MapView - åœ°å›³è¡¨ç¤º
**ãƒ•ã‚¡ã‚¤ãƒ«**: [MapView.tsx](mdc:components/itinerary/MapView.tsx)

**å½¹å‰²**:
- Google Mapsçµ±åˆ
- ç•ªå·ä»˜ããƒãƒ¼ã‚«ãƒ¼è¡¨ç¤º
- æƒ…å ±ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
- ãƒ«ãƒ¼ãƒˆæç”»
- æ—¥åˆ¥ãƒ•ã‚£ãƒ«ã‚¿

**ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```typescript
import { MapView } from '@/components/itinerary/MapView';

<MapView
  days={currentItinerary.schedule}
  selectedDay={selectedDay} // undefined = å…¨æ—¥ç¨‹
  height="600px"
/>
```

**ç’°å¢ƒå¤‰æ•°**:
```env
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your_api_key
```

**âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …**:
- åœ°å›³æ©Ÿèƒ½ã¯ç¾æ™‚ç‚¹ã§**åŸºæœ¬å®Ÿè£…ã®ã¿**ã§ã€æ´—ç·´ã•ã‚Œã¦ã„ã¾ã›ã‚“
- UI/UXã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«æ”¹å–„ã®ä½™åœ°ã‚ã‚Š
- **ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«æ©Ÿèƒ½**ã¨ã—ã¦æ‰±ã„ã€å°†æ¥çš„ãªãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã‚’æ¨å¥¨
- APIã‚­ãƒ¼ãŒãªã„å ´åˆã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º

**å®Ÿè£…ã®æ³¨æ„ç‚¹**:
- âœ… ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä¸€åº¦ã ã‘èª­ã¿è¾¼ã‚€ï¼ˆ`useEffect` + ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰
- âœ… ä½ç½®æƒ…å ±ãŒãªã„ã‚¹ãƒãƒƒãƒˆã¯ç„¡è¦–
- âœ… ãƒãƒ¼ã‚«ãƒ¼ã¯å‰Šé™¤â†’å†ä½œæˆã§æ›´æ–°
- âœ… ãƒ«ãƒ¼ãƒˆã¯ Google Directions API ä½¿ç”¨

---

### 6. ItineraryTemplates - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ
**ãƒ•ã‚¡ã‚¤ãƒ«**: [ItineraryTemplates.tsx](mdc:components/itinerary/ItineraryTemplates.tsx)

**å½¹å‰²**:
- 5ç¨®é¡ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠUI
- é¸æŠçŠ¶æ…‹ã®è¦–è¦šåŒ–
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆé–¢æ•°

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç¨®é¡**:
1. **standard** (ğŸ—ºï¸) - ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰
2. **photo** (ğŸ“·) - ãƒ•ã‚©ãƒˆã‚¸ã‚§ãƒ‹ãƒƒã‚¯
3. **foodie** (ğŸ½ï¸) - ã‚°ãƒ«ãƒ¡æ—…
4. **adventure** (â›°ï¸) - ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼
5. **culture** (âœ¨) - æ–‡åŒ–ä½“é¨“

**ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```typescript
import { ItineraryTemplates, getTemplatePrompt } from '@/components/itinerary/ItineraryTemplates';

const { selectedTemplate, setSelectedTemplate } = useStore();

<ItineraryTemplates
  currentTemplate={selectedTemplate}
  onSelect={setSelectedTemplate}
/>

// AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«çµ±åˆ
const templatePrompt = getTemplatePrompt(selectedTemplate);
```

**å‹å®šç¾©**:
```typescript
// types/itinerary.ts
export type ItineraryTemplate = 
  | "standard" 
  | "photo" 
  | "foodie" 
  | "adventure" 
  | "culture";

// ItineraryData ã«è¿½åŠ 
interface ItineraryData {
  // ...
  template?: ItineraryTemplate;
}
```

**ZustandçŠ¶æ…‹ç®¡ç†**:
```typescript
// lib/store/useStore.ts
selectedTemplate: ItineraryTemplate;
setSelectedTemplate: (template: ItineraryTemplate) => void;
```

---

### 7. ItineraryPreview - ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
**ãƒ•ã‚¡ã‚¤ãƒ«**: [ItineraryPreview.tsx](mdc:components/itinerary/ItineraryPreview.tsx)

**å½¹å‰²**:
- ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆï¼ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«/åœ°å›³ï¼‰
- å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çµ±åˆ
- Zustandã¨ã®é€£æº

**ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```typescript
import { ItineraryPreview } from '@/components/itinerary/ItineraryPreview';

<ItineraryPreview />
```

**å†…éƒ¨æ§‹é€ **:
```typescript
const [viewMode, setViewMode] = useState<'schedule' | 'map'>('schedule');
const [isEditing, setIsEditing] = useState(false);

// ãƒ˜ãƒƒãƒ€ãƒ¼
<ItineraryHeader itinerary={currentItinerary} onEdit={...} />

// ãƒ“ãƒ¥ãƒ¼åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³
<button onClick={() => setViewMode('schedule')}>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</button>
<button onClick={() => setViewMode('map')}>åœ°å›³</button>

// è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰
{viewMode === 'schedule' ? (
  <DaySchedule ... />
) : (
  <MapView ... />
)}
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### ç·¨é›†ãƒ•ãƒ­ãƒ¼
```
SpotCardï¼ˆç·¨é›†ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ï¼‰
  â†“
EditSpotModalï¼ˆç·¨é›†å‡¦ç†ï¼‰
  â†“
DayScheduleï¼ˆonDayUpdateçµŒç”±ï¼‰
  â†“
ItineraryPreviewï¼ˆupdateItineraryå‘¼ã³å‡ºã—ï¼‰
  â†“
Zustandï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹æ›´æ–°ï¼‰
```

### AIæ›´æ–°ãƒ•ãƒ­ãƒ¼
```
AIãƒãƒ£ãƒƒãƒˆï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡ï¼‰
  â†“
parseAIResponseï¼ˆJSONæŠ½å‡ºï¼‰
  â†“
Zustand.setItineraryï¼ˆçŠ¶æ…‹æ›´æ–°ï¼‰
  â†“
ItineraryPreviewï¼ˆè‡ªå‹•å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼‰
```

---

## å‹å®šç¾©

### ä¸»è¦ãªå‹
```typescript
// types/itinerary.ts
export interface ItineraryData {
  id: string;
  title: string;
  destination: string;
  startDate?: string;
  endDate?: string;
  duration?: number;
  summary?: string;
  schedule: DaySchedule[];
  totalBudget?: number;
  status: 'draft' | 'completed' | 'archived';
  template?: ItineraryTemplate;
  createdAt: Date;
  updatedAt: Date;
}

export interface DaySchedule {
  day: number;
  date?: string;
  title?: string;
  spots: TouristSpot[];
  totalDistance?: number;
  totalCost?: number;
}

export interface TouristSpot {
  id: string;
  name: string;
  description: string;
  location?: Location;
  scheduledTime?: string;
  duration?: number;
  category?: 'sightseeing' | 'dining' | 'transportation' | 'accommodation' | 'other';
  estimatedCost?: number;
  notes?: string;
  imageUrl?: string;
}

export interface Location {
  address: string;
  lat?: number;
  lng?: number;
}

export type ItineraryTemplate = 
  | "standard" 
  | "photo" 
  | "foodie" 
  | "adventure" 
  | "culture";
```

---

## ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿

### ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
**ãƒ•ã‚¡ã‚¤ãƒ«**: [sample-itinerary.ts](mdc:lib/mock-data/sample-itinerary.ts)

**æä¾›ãƒ‡ãƒ¼ã‚¿**:
1. **äº¬éƒ½2æ³Š3æ—¥** - 17ã‚¹ãƒãƒƒãƒˆï¼ˆä½ç½®æƒ…å ±ãƒ»ç”»åƒä»˜ãï¼‰
2. **æ±äº¬ã‚°ãƒ«ãƒ¡æ—…2æ—¥é–“** - 5ã‚¹ãƒãƒƒãƒˆ

**ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```typescript
import { loadSampleItinerary } from '@/lib/mock-data/sample-itinerary';

// äº¬éƒ½ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
const kyotoData = loadSampleItinerary('kyoto');
setItinerary(kyotoData);

// æ±äº¬ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
const tokyoData = loadSampleItinerary('tokyo');
setItinerary(tokyoData);
```

**ãƒ‡ãƒãƒƒã‚°ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
[LoadSampleButton.tsx](mdc:components/debug/LoadSampleButton.tsx) - é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§ç”»é¢å³ä¸‹ã«è¡¨ç¤º

---

## ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³

### ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯
```typescript
// æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
className="bg-gradient-to-br from-blue-600 to-purple-600"
className="bg-gradient-to-r from-blue-50 to-purple-50"
```

### ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
```typescript
// ã‚«ãƒ¼ãƒ‰
className="transition-all hover:shadow-lg hover:border-blue-500"

// ãƒœã‚¿ãƒ³
className="group-hover:opacity-100 opacity-0"
```

### æŠ˜ã‚ŠãŸãŸã¿ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
```typescript
// å±•é–‹çŠ¶æ…‹ã®ç®¡ç†
const [isExpanded, setIsExpanded] = useState(true);

// æ¡ä»¶ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
{isExpanded && (
  <div className="transition-all">
    {/* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
  </div>
)}
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### Next.js Image
```typescript
import Image from 'next/image';

<Image
  src={spot.imageUrl}
  alt={spot.name}
  width={400}
  height={300}
  className="object-cover rounded-lg"
  onError={() => setImageError(true)}
/>
```

### é…å»¶èª­ã¿è¾¼ã¿
```typescript
// åœ°å›³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª­ã¿è¾¼ã¿
useEffect(() => {
  if (window.google) return; // æ—¢ã«èª­ã¿è¾¼ã¿æ¸ˆã¿
  
  const script = document.createElement('script');
  script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}`;
  script.async = true;
  document.head.appendChild(script);
  
  return () => {
    // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  };
}, []);
```

---

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ç”»åƒèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼
```typescript
const [imageError, setImageError] = useState(false);

<Image
  onError={() => setImageError(true)}
  // imageError=trueã®å ´åˆã¯éè¡¨ç¤º
  style={{ display: imageError ? 'none' : 'block' }}
/>
```

### Google Maps APIã‚­ãƒ¼æœªè¨­å®š
```typescript
if (!apiKey) {
  return (
    <div className="text-center text-gray-500">
      Google Maps APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“
    </div>
  );
}
```

### ä½ç½®æƒ…å ±ãŒãªã„ã‚¹ãƒãƒƒãƒˆ
```typescript
const spotsWithLocation = spots.filter(spot => 
  spot.location?.lat && spot.location?.lng
);

if (spotsWithLocation.length === 0) {
  return <div>ä½ç½®æƒ…å ±ã®ã‚ã‚‹ã‚¹ãƒãƒƒãƒˆãŒã‚ã‚Šã¾ã›ã‚“</div>;
}
```

---

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### âœ… DO
- ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ã§çµ±ä¸€æ„Ÿã‚’å‡ºã™
- Next.js Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ç”»åƒæœ€é©åŒ–
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å¾¹åº•
- ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã§ç·¨é›†å¯èƒ½ç®‡æ‰€ã‚’æ˜ç¤º
- æŠ˜ã‚ŠãŸãŸã¿ã§æƒ…å ±é‡ã‚’èª¿æ•´
- Google Maps ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«æ©Ÿèƒ½ã¨ã—ã¦æ‰±ã†

### âŒ DON'T
- ç›´æ¥ `<img>` ã‚¿ã‚°ã‚’ä½¿ç”¨ã—ãªã„
- ã‚¨ãƒ©ãƒ¼æ™‚ã«ä½•ã‚‚è¡¨ç¤ºã—ãªã„
- Google Maps APIã‚­ãƒ¼ãŒãªã„ã¨ã‚¢ãƒ—ãƒªãŒå‹•ã‹ãªã„ã‚ˆã†ãªå®Ÿè£…
- å¤§é‡ã®ã‚¹ãƒãƒƒãƒˆã‚’ä¸€åº¦ã«è¡¨ç¤ºã—ã¦é‡ãã™ã‚‹
- ç·¨é›†çŠ¶æ…‹ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ä¿å­˜ã—ãªã„

---

## ãƒ†ã‚¹ãƒˆæ–¹æ³•

### åŸºæœ¬è¡¨ç¤º
1. ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€
2. ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. ç”»åƒãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹

### ç·¨é›†æ©Ÿèƒ½
1. ç·¨é›†ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. EditSpotModal ãŒé–‹ã
3. ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç·¨é›†
4. ä¿å­˜ â†’ åæ˜ ç¢ºèª

### åœ°å›³æ©Ÿèƒ½
1. APIã‚­ãƒ¼ãŒè¨­å®šæ¸ˆã¿ã‹ç¢ºèª
2. åœ°å›³ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒãƒ¼ã‚«ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
4. ãƒãƒ¼ã‚«ãƒ¼ã‚¯ãƒªãƒƒã‚¯ â†’ æƒ…å ±ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
5. æ—¥åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ã‚’å¤‰æ›´

---

## ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

### Phase 5.2ï¼ˆä¸€æ™‚ä¿å­˜æ©Ÿèƒ½ï¼‰
- LocalStorageé€£æº
- è‡ªå‹•ä¿å­˜ï¼ˆ5åˆ†ã”ã¨ï¼‰
- ã—ãŠã‚Šä¸€è¦§è¡¨ç¤º

### Phase 5.3ï¼ˆPDFå‡ºåŠ›ï¼‰
- PDFç”Ÿæˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆ
- ã—ãŠã‚Šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­è¨ˆ
- å°åˆ·æœ€é©åŒ–

### Phase 7ï¼ˆUIæœ€é©åŒ–ï¼‰
- ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ
- ãƒªã‚µã‚¤ã‚¶ãƒ¼æ©Ÿèƒ½
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–

---

**è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- [PHASE5.1_IMPLEMENTATION.md](mdc:docs/PHASE5.1_IMPLEMENTATION.md) - å®Ÿè£…å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ
- [PHASE5.1_USAGE.md](mdc:docs/PHASE5.1_USAGE.md) - æ©Ÿèƒ½ç¢ºèªã‚¬ã‚¤ãƒ‰
