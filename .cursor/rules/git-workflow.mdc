---
globs: ".git/**/*,.github/**/*"
description: Gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¨ã‚³ãƒŸãƒƒãƒˆè¦ç´„ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
---

# Gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

## æ¦‚è¦
ä¸€è²«ã—ãŸGitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ã‚ˆã‚Šã€ã‚³ãƒ¼ãƒ‰å“è³ªã‚’ç¶­æŒã—ã€ãƒãƒ¼ãƒ é–‹ç™ºã‚’å††æ»‘ã«ã—ã¾ã™ã€‚

## ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

### ãƒ–ãƒ©ãƒ³ãƒæ§‹æˆ
```
main (ä¿è­·ãƒ–ãƒ©ãƒ³ãƒ)
â”œâ”€â”€ develop (é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒ)
â”‚   â”œâ”€â”€ feature/xxx (æ©Ÿèƒ½é–‹ç™º)
â”‚   â”œâ”€â”€ bugfix/xxx (ãƒã‚°ä¿®æ­£)
â”‚   â””â”€â”€ refactor/xxx (ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°)
â””â”€â”€ hotfix/xxx (ç·Šæ€¥ä¿®æ­£)
```

### ãƒ–ãƒ©ãƒ³ãƒå‘½åè¦å‰‡

#### feature/ - æ–°æ©Ÿèƒ½é–‹ç™º
```bash
feature/add-comment-system
feature/pdf-export
feature/user-profile
```

#### bugfix/ - ãƒã‚°ä¿®æ­£
```bash
bugfix/fix-auth-redirect
bugfix/resolve-memory-leak
```

#### refactor/ - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
```bash
refactor/optimize-db-queries
refactor/simplify-error-handling
```

#### hotfix/ - ç·Šæ€¥ä¿®æ­£ï¼ˆæœ¬ç•ªç’°å¢ƒã®ãƒã‚°ï¼‰
```bash
hotfix/security-patch
hotfix/critical-crash-fix
```

#### chore/ - é›‘å‹™ï¼ˆä¾å­˜é–¢ä¿‚æ›´æ–°ãªã©ï¼‰
```bash
chore/update-dependencies
chore/add-eslint-rule
```

### ãƒ–ãƒ©ãƒ³ãƒä½œæˆ

```bash
# æœ€æ–°ã®mainã‹ã‚‰æ–°ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
git checkout main
git pull origin main
git checkout -b feature/new-feature

# ä½œæ¥­å¾Œã«push
git push -u origin feature/new-feature
```

## ã‚³ãƒŸãƒƒãƒˆè¦ç´„ï¼ˆConventional Commitsï¼‰

### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Typeï¼ˆå¿…é ˆï¼‰

| Type | èª¬æ˜ | ä¾‹ |
|------|------|-----|
| `feat` | æ–°æ©Ÿèƒ½ | `feat(chat): add streaming response` |
| `fix` | ãƒã‚°ä¿®æ­£ | `fix(auth): resolve session expiry issue` |
| `docs` | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | `docs(readme): update setup instructions` |
| `style` | ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆæ©Ÿèƒ½ã«å½±éŸ¿ã—ãªã„ï¼‰ | `style(button): fix button alignment` |
| `refactor` | ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° | `refactor(api): simplify error handling` |
| `perf` | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ | `perf(db): optimize query performance` |
| `test` | ãƒ†ã‚¹ãƒˆè¿½åŠ ãƒ»ä¿®æ­£ | `test(chat): add e2e tests` |
| `chore` | ãƒ“ãƒ«ãƒ‰ãƒ»è¨­å®šå¤‰æ›´ | `chore(deps): update dependencies` |
| `ci` | CIè¨­å®šå¤‰æ›´ | `ci(github): add deploy workflow` |
| `revert` | å¤‰æ›´ã®å–ã‚Šæ¶ˆã— | `revert: revert "feat: add feature"` |

### Scopeï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ã‚³ãƒŸãƒƒãƒˆã®å½±éŸ¿ç¯„å›²ã‚’ç¤ºã™ï¼š

```bash
feat(chat): add streaming response
fix(auth): resolve Google OAuth callback
docs(api): update API documentation
refactor(itinerary): simplify data structure
```

### Subjectï¼ˆå¿…é ˆï¼‰

- 50æ–‡å­—ä»¥å†…
- å‘½ä»¤å½¢ï¼ˆ"add", "fix", "update"ï¼‰
- å°æ–‡å­—ã§é–‹å§‹
- æœ«å°¾ã«ãƒ”ãƒªã‚ªãƒ‰ä¸è¦

```bash
# âœ… Good
feat(chat): add streaming response support

# âŒ Bad
feat(chat): Added streaming response support.  # éå»å½¢ã€ãƒ”ãƒªã‚ªãƒ‰
Feat(chat): Add streaming response support  # å¤§æ–‡å­—é–‹å§‹
```

### Bodyï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

è©³ç´°ãªèª¬æ˜ã€‚ä½•ã‚’å¤‰æ›´ã—ãŸã‹ã€ãªãœå¤‰æ›´ã—ãŸã‹ã‚’è¨˜è¼‰ã€‚

```bash
feat(chat): add streaming response support

Implement real-time AI response streaming using Server-Sent Events.
This improves UX by showing responses as they are generated.

- Add ReadableStream support in API route
- Update MessageList to handle streaming chunks
- Add streaming state management in Zustand store
```

### Footerï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

Issueç•ªå·ã€ç ´å£Šçš„å¤‰æ›´ã®è¨˜è¼‰ã€‚

```bash
# Issueè‡ªå‹•ã‚¯ãƒ­ãƒ¼ã‚º
Closes #123
Fixes #456

# ç ´å£Šçš„å¤‰æ›´
BREAKING CHANGE: API response format has changed
```

## ã‚³ãƒŸãƒƒãƒˆä¾‹

### æ–°æ©Ÿèƒ½è¿½åŠ 
```bash
git commit -m "feat(itinerary): add PDF export functionality

Implement PDF generation using jsPDF library.
Users can now export their itineraries as PDF files.

- Add PDFExportButton component
- Implement PDF layout with itinerary details
- Add download functionality

Closes #42"
```

### ãƒã‚°ä¿®æ­£
```bash
git commit -m "fix(auth): resolve session expiry issue

Fix bug where users were logged out unexpectedly.
Increase JWT maxAge to 30 days.

Fixes #78"
```

### ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
```bash
git commit -m "refactor(api): simplify error handling

Consolidate error handling logic into a single function.
Improve error messages and status codes.

- Create ApiError class
- Update all API routes to use new error handler
- Add comprehensive error logging"
```

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
```bash
git commit -m "docs(readme): update environment variables section

Add missing SUPABASE_SERVICE_ROLE_KEY to .env.example.
Clarify the difference between anon key and service role key."
```

## Pull Requestï¼ˆPRï¼‰

### PRä½œæˆå‰ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ãƒ–ãƒ©ãƒ³ãƒãŒæœ€æ–°ã®mainã‹ã‚‰åˆ†å²ã—ã¦ã„ã‚‹
- [ ] ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¦ç´„ã«å¾“ã£ã¦ã„ã‚‹
- [ ] [pre-build-check](mdc:.cursor/rules/pre-build-check.mdc)ã‚’å®Ÿè¡Œ
  - [ ] `npm run type-check` æˆåŠŸ
  - [ ] `npm run lint` æˆåŠŸ
  - [ ] `npm run build` æˆåŠŸ
- [ ] ãƒ†ã‚¹ãƒˆãŒè¿½åŠ ãƒ»æ›´æ–°ã•ã‚Œã¦ã„ã‚‹ï¼ˆå¿…è¦ãªå ´åˆï¼‰
- [ ] console.logãªã©ã®ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ï¼ˆå¿…è¦ãªå ´åˆï¼‰

### PRã‚¿ã‚¤ãƒˆãƒ«

ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨åŒã˜å½¢å¼ï¼š

```
feat(chat): add streaming response support
fix(auth): resolve session expiry issue
docs(api): update API documentation
```

### PRèª¬æ˜

[PRä½œæˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](mdc:.cursor/rules/pr-from-issue.mdc)ã‚’å‚ç…§ã€‚

```markdown
Closes #42

## æ¦‚è¦
ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã«ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¯¾å¿œã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

## èƒŒæ™¯
ç¾çŠ¶ã€AIå¿œç­”ã‚’å…¨ã¦å—ã‘å–ã‚‹ã¾ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¾…ã¤å¿…è¦ãŒã‚ã‚Šã€UXãŒæ‚ªã„ã¨ã®å ±å‘ŠãŒã‚ã‚Šã¾ã—ãŸã€‚

## å®Ÿè£…å†…å®¹
- `app/api/chat/route.ts`: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¯¾å¿œ
- `components/chat/MessageList.tsx`: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ä¸­ã®è¡¨ç¤ºUI
- `lib/store/useStore.ts`: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°çŠ¶æ…‹ç®¡ç†

## ãƒ†ã‚¹ãƒˆæ–¹æ³•
1. ãƒãƒ£ãƒƒãƒˆã§ã€Œæ±äº¬ã®è¦³å…‰ã‚¹ãƒãƒƒãƒˆã‚’æ•™ãˆã¦ã€ã¨é€ä¿¡
2. AIã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã€æ–‡å­—ãŒå¾ã€…ã«è¡¨ç¤ºã•ã‚Œã‚‹
3. å®Œå…¨ã«å—ä¿¡å¾Œã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã«è¿½åŠ ã•ã‚Œã‚‹

## ãƒ“ãƒ«ãƒ‰ç¢ºèª
- [x] `npm run type-check` æˆåŠŸ
- [x] `npm run lint` æˆåŠŸ
- [x] `npm run build` æˆåŠŸ
```

### PRãƒ¬ãƒ“ãƒ¥ãƒ¼

#### ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼
- ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è¦³ç‚¹
  - ãƒ­ã‚¸ãƒƒã‚¯ã¯æ­£ã—ã„ã‹
  - ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚’è€ƒæ…®ã—ã¦ã„ã‚‹ã‹
  - ãƒ†ã‚¹ãƒˆã¯ååˆ†ã‹
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®å•é¡Œã¯ãªã„ã‹
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ã¯ï¼Ÿ

#### ãƒ¬ãƒ“ãƒ¥ã‚¤ãƒ¼
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«å¯¾ã—ã¦ä¸å¯§ã«å¯¾å¿œ
- è³ªå•ã‚„ææ¡ˆã«æ„Ÿè¬ã®æ„ã‚’ç¤ºã™
- å¤‰æ›´ã‚’åŠ ãˆãŸã‚‰å†åº¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼

## ãƒãƒ¼ã‚¸æˆ¦ç•¥

### Squash and Mergeï¼ˆæ¨å¥¨ï¼‰

è¤‡æ•°ã®ã‚³ãƒŸãƒƒãƒˆã‚’1ã¤ã«ã¾ã¨ã‚ã¦ãƒãƒ¼ã‚¸ã€‚å±¥æ­´ãŒã‚¯ãƒªãƒ¼ãƒ³ã«ãªã‚‹ã€‚

```bash
# GitHubä¸Šã§ "Squash and Merge" ã‚’é¸æŠ
# ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ•´ç†ã—ã¦ãƒãƒ¼ã‚¸
```

### Rebase and Merge

å±¥æ­´ã‚’ç·šå½¢ã«ä¿ã¤ã€‚ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç¶ºéº—ãªå ´åˆã«ä½¿ç”¨ã€‚

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§rebase
git checkout feature/new-feature
git rebase main

# ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ±ºå¾Œ
git rebase --continue

# Force push
git push --force-with-lease origin feature/new-feature
```

### Merge Commit

é€šå¸¸ã®ãƒãƒ¼ã‚¸ã€‚å±¥æ­´ãŒè¤‡é›‘ã«ãªã‚‹ãŸã‚éæ¨å¥¨ã€‚

## Gitæ“ä½œã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### DOï¼ˆæ¨å¥¨ï¼‰

#### 1. å°ã•ãé »ç¹ã«ã‚³ãƒŸãƒƒãƒˆ
```bash
# âœ… Good - æ©Ÿèƒ½ã”ã¨ã«ã‚³ãƒŸãƒƒãƒˆ
git add components/chat/MessageInput.tsx
git commit -m "feat(chat): add message input validation"

git add components/chat/MessageList.tsx
git commit -m "feat(chat): add message list scrolling"
```

#### 2. ã‚³ãƒŸãƒƒãƒˆå‰ã«å·®åˆ†ã‚’ç¢ºèª
```bash
# âœ… Good
git diff
git add -p  # å¯¾è©±çš„ã«ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
git commit -m "feat: add feature"
```

#### 3. ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸å¯§ã«æ›¸ã
```bash
# âœ… Good - è©³ç´°ãªèª¬æ˜
git commit -m "feat(chat): add streaming response

Implement real-time AI response streaming.
Improves UX by showing responses as they are generated."

# âŒ Bad - èª¬æ˜ä¸è¶³
git commit -m "update"
```

#### 4. ãƒ–ãƒ©ãƒ³ãƒã‚’æœ€æ–°ã«ä¿ã¤
```bash
# âœ… Good - å®šæœŸçš„ã«mainã‚’å–ã‚Šè¾¼ã‚€
git checkout main
git pull origin main
git checkout feature/new-feature
git rebase main
```

#### 5. Force push with lease
```bash
# âœ… Good - å®‰å…¨ãªforce push
git push --force-with-lease origin feature/new-feature

# âŒ Bad - ä»–äººã®å¤‰æ›´ã‚’ä¸Šæ›¸ãã™ã‚‹å¯èƒ½æ€§
git push --force origin feature/new-feature
```

### DON'Tï¼ˆéæ¨å¥¨ï¼‰

#### 1. âŒ mainãƒ–ãƒ©ãƒ³ãƒã«ç›´æ¥push
```bash
# âŒ Bad
git checkout main
git commit -m "fix: quick fix"
git push origin main

# âœ… Good - ãƒ–ãƒ©ãƒ³ãƒã‚’åˆ‡ã‚‹
git checkout -b hotfix/quick-fix
git commit -m "fix: quick fix"
git push origin hotfix/quick-fix
# PRä½œæˆ
```

#### 2. âŒ å¤§é‡ã®å¤‰æ›´ã‚’1ã‚³ãƒŸãƒƒãƒˆã«ã¾ã¨ã‚ã‚‹
```bash
# âŒ Bad - 1ã‚³ãƒŸãƒƒãƒˆã§10ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´
git add .
git commit -m "feat: add many features"

# âœ… Good - æ©Ÿèƒ½ã”ã¨ã«åˆ†å‰²
git add file1.ts file2.ts
git commit -m "feat(auth): add login"

git add file3.ts file4.ts
git commit -m "feat(chat): add messaging"
```

#### 3. âŒ æ›–æ˜§ãªã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
```bash
# âŒ Bad
git commit -m "update"
git commit -m "fix bug"
git commit -m "wip"

# âœ… Good
git commit -m "feat(chat): add streaming response support"
git commit -m "fix(auth): resolve session expiry issue"
git commit -m "refactor(api): simplify error handling"
```

#### 4. âŒ æ©Ÿå¯†æƒ…å ±ã‚’ã‚³ãƒŸãƒƒãƒˆ
```bash
# âŒ Bad - .env.local ã‚’ã‚³ãƒŸãƒƒãƒˆ
git add .env.local
git commit -m "add env"

# âœ… Good - .gitignore ã§é™¤å¤–
echo ".env*.local" >> .gitignore
```

#### 5. âŒ ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã‚’å«ã‚€PR
```bash
# âŒ Bad - merge commit ãŒå«ã¾ã‚Œã‚‹
git checkout feature/new-feature
git merge main  # ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆãŒä½œã‚‰ã‚Œã‚‹

# âœ… Good - rebase ã‚’ä½¿ç”¨
git checkout feature/new-feature
git rebase main  # å±¥æ­´ãŒç·šå½¢ã«ãªã‚‹
```

## ã‚ˆãä½¿ã†Gitã‚³ãƒãƒ³ãƒ‰

### ãƒ–ãƒ©ãƒ³ãƒæ“ä½œ
```bash
# ãƒ–ãƒ©ãƒ³ãƒä¸€è¦§
git branch -a

# ãƒ–ãƒ©ãƒ³ãƒä½œæˆãƒ»åˆ‡ã‚Šæ›¿ãˆ
git checkout -b feature/new-feature

# ãƒ–ãƒ©ãƒ³ãƒå‰Šé™¤
git branch -d feature/old-feature

# ãƒªãƒ¢ãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒå‰Šé™¤
git push origin --delete feature/old-feature
```

### ã‚³ãƒŸãƒƒãƒˆä¿®æ­£
```bash
# ç›´å‰ã®ã‚³ãƒŸãƒƒãƒˆã‚’ä¿®æ­£
git commit --amend

# ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ä¿®æ­£
git commit --amend -m "new message"

# ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã™ï¼ˆå¤‰æ›´ã¯ä¿æŒï¼‰
git reset --soft HEAD~1

# ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã™ï¼ˆå¤‰æ›´ã‚‚ç ´æ£„ï¼‰
git reset --hard HEAD~1
```

### å¤‰æ›´ã®ä¸€æ™‚ä¿å­˜
```bash
# å¤‰æ›´ã‚’ä¸€æ™‚ä¿å­˜
git stash

# ä¿å­˜ã—ãŸå¤‰æ›´ã‚’ç¢ºèª
git stash list

# å¤‰æ›´ã‚’å¾©å…ƒ
git stash pop

# ç‰¹å®šã®stashã‚’å¾©å…ƒ
git stash apply stash@{0}

# stashã‚’å‰Šé™¤
git stash drop
```

### ãƒªãƒ™ãƒ¼ã‚¹
```bash
# mainã®æœ€æ–°ã‚’å–ã‚Šè¾¼ã‚€
git checkout feature/new-feature
git rebase main

# ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒªãƒ™ãƒ¼ã‚¹ï¼ˆã‚³ãƒŸãƒƒãƒˆã‚’ã¾ã¨ã‚ã‚‹ï¼‰
git rebase -i HEAD~3

# ãƒªãƒ™ãƒ¼ã‚¹ä¸­æ­¢
git rebase --abort

# ãƒªãƒ™ãƒ¼ã‚¹ç¶šè¡Œ
git rebase --continue
```

### ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ±º
```bash
# ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
git status

# ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ±ºå¾Œ
git add <resolved-file>
git rebase --continue
# ã¾ãŸã¯
git merge --continue
```

## Git Hooks

### pre-commitï¼ˆã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯ï¼‰

```bash
# .husky/pre-commit
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Pre-commit ãƒã‚§ãƒƒã‚¯..."

# Lint
npm run lint || exit 1

# å‹ãƒã‚§ãƒƒã‚¯
npm run type-check || exit 1

echo "âœ… Pre-commit ãƒã‚§ãƒƒã‚¯å®Œäº†"
```

### commit-msgï¼ˆã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œè¨¼ï¼‰

```bash
# .husky/commit-msg
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Conventional Commitså½¢å¼ãƒã‚§ãƒƒã‚¯
npx --no -- commitlint --edit "$1"
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãŒç™ºç”Ÿã—ãŸ
```bash
# ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰‹å‹•ç·¨é›†
# <<<<<<< HEAD ã¨ >>>>>>> ã®éƒ¨åˆ†ã‚’ä¿®æ­£

# è§£æ±ºå¾Œ
git add <resolved-file>
git rebase --continue
```

#### 2. èª¤ã£ã¦mainã«pushã—ã¦ã—ã¾ã£ãŸ
```bash
# âš ï¸ å±é™ºï¼šä»–ã®äººãŒpullæ¸ˆã¿ã§ãªã„å ´åˆã®ã¿
git reset --hard HEAD~1
git push --force origin main

# âœ… å®‰å…¨ï¼šrevertã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆ
git revert HEAD
git push origin main
```

#### 3. ã‚³ãƒŸãƒƒãƒˆã‚’é–“é•ãˆãŸ
```bash
# ã‚³ãƒŸãƒƒãƒˆå–ã‚Šæ¶ˆã—ï¼ˆå¤‰æ›´ã¯ä¿æŒï¼‰
git reset --soft HEAD~1

# ä¿®æ­£å¾Œã€å†ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "correct message"
```

## å‚è€ƒãƒªãƒ³ã‚¯

- [Conventional Commits](https://www.conventionalcommits.org/)
- [GitHub Flow](https://guides.github.com/introduction/flow/)
- [docs/GUIDELINE.md](mdc:docs/GUIDELINE.md) - é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
- [.cursor/rules/pr-from-issue.mdc](mdc:.cursor/rules/pr-from-issue.mdc) - PRä½œæˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
- [.cursor/rules/pre-build-check.mdc](mdc:.cursor/rules/pre-build-check.mdc) - Pushå‰ãƒã‚§ãƒƒã‚¯
