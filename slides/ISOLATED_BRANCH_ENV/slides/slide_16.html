<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GitHub Actions実装 | スライド 16</title>
    <link rel="stylesheet" href="../assets/css/styles.css" />
  </head>
  <body>
    <!-- プログレスバー -->
    <div class="progress-bar">
      <div class="progress-bar-fill"></div>
    </div>

    <!-- スライドコンテナ -->
    <div class="slide-container">
      <div class="slide-content">
        <h2>⚙️ GitHub Actions実装</h2>

        <div class="card">
          <h3>push.yml の役割</h3>
          <ol style="font-size: 1.2rem; line-height: 2">
            <li>ArgoCD Applicationを作成（初回のみ）</li>
            <li>Dockerイメージをビルド・GCRにプッシュ</li>
            <li>マニフェストをブランチ固有に変換</li>
            <li>変換したマニフェストをコミット</li>
            <li>ArgoCD同期をトリガー</li>
          </ol>
        </div>

        <div class="card">
          <h3>リソース名の変換（yq使用）</h3>
          <pre><code class="language-bash"># Deployment名の更新
yq -i '.metadata.name = "my-app-'"$HASH"'"' deployment.yml

# Ingress hostの更新
yq -i '.spec.rules[0].host = "my-app-'"$HASH"'.example.com"' \
  ingress.yml</code></pre>
        </div>

        <div class="card">
          <h3>PRへの自動コメント</h3>
          <pre><code class="language-bash">gh pr comment "$PR_NUMBER" --body "🚀 Preview: 
https://my-app-$HASH.example.com"</code></pre>
        </div>
      </div>
    </div>

    <!-- スライド番号 -->
    <div class="slide-number"></div>

    <!-- ナビゲーション -->
    <div class="navigation">
      <button class="nav-button prev">← 前へ</button>
      <button class="nav-button home">🏠 ホーム</button>
      <button class="nav-button next">次へ →</button>
    </div>

    <script src="../assets/js/navigation.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css"
    />
    <script>
      hljs.highlightAll();
    </script>
  </body>
</html>
